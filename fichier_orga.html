<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Bonnes pratiques</title>

<script src="site_libs/header-attrs-2.9/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/clipboard-1.7.1/clipboard.min.js"></script>
<link href="site_libs/primer-tooltips-1.4.0/build.css" rel="stylesheet" />
<link href="site_libs/klippy-0.0.0.9500/css/klippy.min.css" rel="stylesheet" />
<script src="site_libs/klippy-0.0.0.9500/js/klippy.min.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>








<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"><a href="#" style="max-width:60px;" class="navbar-left"><img src="image/logo_ingeco_site.png"></a></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Start
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="package_love.html">Package</a>
    </li>
    <li>
      <a href="fichier_orga.html">Organiser ses fichiers</a>
    </li>
    <li>
      <a href="ressources.html">Ressources</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Préparation Données
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="excel.html">Excel : import-export</a>
    </li>
    <li>
      <a href="selection.html">Selection colonnes</a>
    </li>
    <li>
      <a href="modifier.html">Selection lignes</a>
    </li>
    <li>
      <a href="conversion.html">Conversion</a>
    </li>
    <li>
      <a href="missing.html">Donnees manquantes</a>
    </li>
    <li>
      <a href="decrire.html">Modifier-Ajouter colonne</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Presentation Données
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="decrire.html">Tableaux</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Stat descriptive
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="decrire.html">Tests</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="mailto:&lt;laura.march@ird.fr&gt;">
    <span class="fa fa-envelope fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://www.lped.fr/+-march-laura-366-+.html">
    <span class="fa fa-smile-o"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Bonnes pratiques</h1>

</div>


<script>
  addClassKlippyTo("pre.r, pre.markdown");
  addKlippy('right', 'top', 'auto', '1', 'Click to copy', 'Done');
</script>
<p>Quelques conseils avant de partir tête baissée dans le monde merveilleux de R.</p>
<div id="organiser-ses-fichiers" class="section level2">
<h2>Organiser ses fichiers</h2>
<p>Exemple d’organisation de ses fichiers pour inspiration :<br />
<img src="image/arborescence.png" width="25%" style="background-color: #9ecff7; padding:10px; display: inline-block;" /></p>
<p>Pour chaque nouveau script, choisir un nom explicite et indiquer la date de création du fichier dans le nom :</p>
<pre class="r klippy"><code>20210707_Import_donnees_brute.R
20210708_Corrections_donnes.R
20210710_Creations_variables_analyse1.R
20210711_Analyse1.R
20210713_Analyse1_V2.R
20210713_Creations_variables_analyse2.R
20210717_Analyse2.R</code></pre>
</div>
<div id="organiser-son-code" class="section level2">
<h2>Organiser son code</h2>
<p>Dans chaque script R que vous rédigez :<br />
- dans l’en-tête du script, indiquer la date de création du fichier, l’auteur.e, et l’objet du script<br />
- dans votre code, commentez le déroulé de votre script (on oublie en moins de 2 jours)</p>
<pre class="r klippy"><code>################################################################
# Auteur.e : Pocahontas
# Date : 20 ajout 2021
# Projet : Stage M2 Herbier
# Objet : préparation des données pour l&#39;analyse
################################################################

#Import des librairies ----
library(tidyverse)
library(readxl)

#Import des données
donnees &lt;- read_excel(&quot;C:/User/Documents/releve_floristique_20200808.xlxs&quot;,sheet = &quot;Feuil1&quot;)

#Manipulation de données
donnees &lt;- donnees %&gt;% select(id,espece,gps,date,observateur)
...</code></pre>
<p>Astuce : Si votre script est long, vous pouvez générer une table des matières pour mieux naviguer dans le script (cliquer sur “show document outline” en haut à droite). Pour déclarer un titre, on ajoute 4 tirets du 6 (-) à la fin du commentaire.</p>
<pre class="r klippy"><code># Titre 1 Import des librairies ----

# Titre 2 Correction des données ----

# Titre 3 Création de variables ----</code></pre>
</div>
<div id="recherche-reproductible" class="section level2">
<h2>Recherche reproductible</h2>
<p>Lorsque vous analysez des données dans un fichier Excel, l’idéal est d’écrire l’ensemble des opérations effectuées sur vos données dans un ou des scripts (corrections de valeurs dans le fichier, recodage des données manquantes, création et modification de colonne, fonctions utilisées pour vos analyses). Dit autrement, on travaille à partir du fichier Excel des données brutes qui ne doit JAMAIS être modifié à la main, autrement on perd la traçabilité des modifications effectuées. L’idée c’est d’être toujours capable de reproduire ses résultats (figures, tableaux, analyses) pour pouvoir les vérifier, les réutiliser ou les partager. Le fichier Excel des données brutes associé à vos scripts doivent nous permettre de retrouver vos résultats à tout moment.</p>
</div>
<div id="préparer-son-fichier-excel" class="section level2">
<h2>Préparer son fichier Excel</h2>
<p>Pour faciliter le travail dans R de lecture de vos données dans Excel, quelques recommandations :<br />
- des noms de colonnes courts, éviter les espaces et caractères spéciaux (les accents en particulier)<br />
- mettre une seule information par colonne<br />
- mettre une seule observation par ligne - si vous avez plusieurs niveaux d’informations, faire deux onglets (ex : un onglet pour les caractéristiques de vos relevés floristiques, un onglet pour les caractéristiques des parcelles) - éviter de mixer du texte et des chiffres dans une même colonne<br />
- évitez les couleurs, elles ne seront pas lues dans R<br />
- vous pouvez ajouter un onglet “Informations” ou “A LIRE” dans votre fichier Excel pour donner des informations complémentaires pour la bonne compréhension de vos données<br />
- éviter les cellules fusionnées</p>
</div>
<div id="raccourci-clavier" class="section level2">
<h2>Raccourci clavier</h2>
<p>Pour exécuter le code R, un raccourci très pratique<br />
- sous Windows &amp; Linux : <code>Ctrl+Enter</code><br />
- sous Mac : <code>Cmd+Return</code></p>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
